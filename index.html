<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ma collection Pokémon (Lite)</title>
<link rel="stylesheet" href="./styles/app.css">
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script type="module" src="./src/main.js"></script>
<script type="module">
  import { boot } from "./src/app.js";
  boot();
</script>

</head>
<body>
<header>
  <div class="wrap">
    <img alt="pokeball" src="https://upload.wikimedia.org/wikipedia/commons/5/53/Pok%C3%A9_Ball_icon.svg" style="width:22px;height:22px">
    <h1>Ma collection Pokémon (Lite)</h1>
    <div class="bar">
      <span class="uploads">
        <label class="btn">Cartes CSV <input id="csv-cards" type="file" accept=".csv" hidden></label>
        <label class="btn">Scellé CSV <input id="csv-sealed" type="file" accept=".csv" hidden></label>
        <label class="btn">Gradées CSV <input id="csv-graded" type="file" accept=".csv" hidden></label>
      </span>
      <button id="load-demo" class="btn">Exemple</button>
    </div>
  </div>
</header>

<div class="tabs">
  <div class="tab active" data-tab="cards">Cartes</div>
  <div class="tab" data-tab="sealed">Scellé</div>
  <div class="tab" data-tab="graded">Gradées</div>
  <div class="tab" data-tab="stats">Stats</div>
</div>

<main>
  <!-- CARTES -->
  <section class="panel" id="panel-cards">
    <div class="card">
      <h3>Filtres</h3>
      <div class="filters">
        <div class="col"><label>Recherche</label><input id="q" placeholder="Nom, numéro…" type="text"></div>
        <div class="col"><label>Série</label><select id="serie"><option value="all">Toutes</option></select></div>
        <div class="col"><label>Vue</label>
          <select id="view">
            <option value="owned">Possédées</option>
            <option value="missing">Manquantes (normales)</option>
            <option value="missing_reverse">Manquantes (reverse)</option>
            <option value="missing_alt">Manquantes (alternatives)</option>
            <option value="all">Toutes</option>
          </select>
        </div>
        <div class="col span-2"><label>Raretés</label>
          <div class="multi">
            <button id="rarityBtn" type="button" class="multi-btn">Toutes les raretés</button>
            <div id="rarityDD" class="multi-panel" hidden>
              <div id="rarityChips" class="chips"></div>
              <div class="multi-actions"><button type="button" id="checkAll" class="link">Tout</button><span>·</span><button type="button" id="uncheckAll" class="link">Aucun</button></div>
            </div>
          </div>
        </div>
      </div>
      <div class="legend">
        <span><b>Versions :</b></span>
        <span><i class="ball red"></i> Normale</span>
        <span><i class="ball yellow"></i> Reverse</span>
        <span><i class="ball blue"></i> Spéciale</span>
      </div>
    </div>
    <div id="cards-root" class="section"></div>
  </section>

  <!-- SCELLÉ -->
  <section class="panel" id="panel-sealed" style="display:none">
    <div class="card">
      <h3>Filtres scellé</h3>
      <div class="filters">
        <div class="col"><label>Recherche</label><input id="qs" placeholder="Type, détail, commentaire…" type="text"></div>
        <div class="col"><label>Série</label><select id="serieS"><option value="all">Toutes</option></select></div>
        <div class="col"><label>Type</label><select id="typeS"><option value="all">Tous</option></select></div>
        <div class="col"></div>
      </div>
    </div>
    <div id="sealed-root" class="section"></div>
  </section>

  <!-- GRADÉES -->
  <section class="panel" id="panel-graded" style="display:none">
    <div class="card">
      <h3>Filtres gradées</h3>
      <div class="filters">
        <div class="col"><label>Recherche</label><input id="qg" placeholder="Nom, édition…" type="text"></div>
        <div class="col"><label>Société</label><select id="company"><option value="all">Toutes</option></select></div>
        <div class="col"><label>Note minimale: <span id="minG_label">0</span></label><input id="minG" type="range" min="0" max="10" step="0.5" value="0"></div>
        <div class="col"><span class="hint">Astuce : ajoute une colonne « Prix » pour afficher un prix.</span></div>
      </div>
    </div>
    <div id="graded-root" class="section"></div>
  </section>

  <!-- STATS -->
  <section class="panel" id="panel-stats" style="display:none">
    <div class="card">
      <h3>Statistiques de complétion</h3>
      <div id="stats-root" class="stats-wrap"></div>
    </div>
  </section>

  <p class="hint">Ce site charge automatiquement <code>cartes.csv</code>, <code>scelle.csv</code> et <code>gradees.csv</code> s’ils sont présents à la racine du dépôt. Pour les images, mets une colonne <b>Image</b> (ou <b>Image URL</b> pour les cartes) avec une URL absolue ou un chemin relatif du repo (ex : <code>images/pikachu.jpg</code>).</p>
</main>

<!-- Modal image viewer -->
<div id="imgModal" class="modal" aria-hidden="true">
  <button class="close" id="modalClose">Fermer ✕</button>
  <img id="modalImg" alt="aperçu"/>
</div>

</body>
</html>
